<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BABYLANDIA</title>
    <link rel="stylesheet" href="../css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
    <script src="https://kit.fontawesome.com/988110bf96.js" crossorigin="anonymous"></script>
</head>
<body>
    <div id="page" class="site page-category">
        
        <aside class="site-off desktop-hide">
            <div class="off-canvas">
                <div class="canvas-head flexitem">
                    <div class="logo"><a href="/"><span>BABYLANDIA</span></a></div>
                    <a href="#" class="t-close flexcenter"><i class="ri-close-line"></i></a>
                </div>
                <div class="departments"></div>
                <nav></nav>
                <div class="thetop-nav"></div>
            </div>
        </aside>

        <header>
            <div class="header-top mobile-hide">
                <div class="container">
                    <div class="flexitem wrapper">
                        <div class="left">
                            <ul class="flexitem main-links">
                                <li><a href="#">Productos Futuros</a></li>
                                <li><a href="#">Lista de deseos</a></li>
                            </ul>
                        </div>
                        <div class="right">
                            <ul class="flexitem main-links">
                                <li><a href="">Registrarse</a></li>
                                <li><a href="">Mi cuenta</a></li>
                                <li><a href="">Seguimiento de pedidos</a></li>
                                <li><a href="">PEN <span class="icon-small"><i class="ri-arrow-down-s-line"></i></span></a>
                                    <ul>
                                        <li><a href="">PEN</a></li>
                                        <li><a href="">USD</a></li>
                                        <li><a href="">EURO</a></li>
                                    </ul>
                                </li>
                                <li><a href="">Español <span class="icon-small"><i class="ri-arrow-down-s-line"></i></span></a>
                                    <ul>
                                        <li><a href="">Español</a></li>
                                        <li><a href="">English</a></li>
                                        <li><a href="">German</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!-- header top -->
            
            <div class="header-nav">
                <div class="container">
                    <div class="wrapper flexitem">
                        <a href="#" class="trigger desktop-hide"><span class="i ri-menu-2-line"></span></a>
                        <div class="left flexitem">
                            <div class="logo"><a href="/"><span>BABYLANDIA</span></a></div>
                            <nav class="mobile-hide">
                                <ul class="flexitem second-links">
                                    <li><a href="/index.html" class="opc">Inicio</a></li>
                                    <li><a href="shop.html" class="opc">Tienda</a></li>
                                    <li><a href="/about-us.html" class="opc">Sobre Nosotros</a></li>
                                    <li><a href="/blog.html" class="opc">Blog</a></li>
                                    <li><a href="/contact.html" class="opc">Contacto</a></li>
                                </ul>

                            </nav>
                        </div>
                        <div class="right">
                            <ul class="flexitem second-links">
                                <li class="mobile-hide">
                                <a href="#">
                                    <div class="icon-large">
                                    <div><i class="ri-heart-line"></i></div>
                                    <div class="fly-item"><span class="item-number">0</span></div>
                                    </div>
                                </a>
                                </li>

                                <li class="iscart">
                                    <a href="cart.html">
                                        <div class="icon-large">
                                        <div><i class="ri-shopping-cart-line"></i></div>
                                        <div class="fly-item"><span class="item-number">0</span></div>
                                        </div>
                                            <div class="icon-text">
                                            <div class="mini-text">Total</div>
                                            <div class="cart-total">S/0.00</div>
                                        </div>
                                    </a>

                                    <!--mini carro-->
                                    <div class="mini-cart">
                                        <div class="content">
                                            <div class="cart-head">
                                                <span id="cart-count">0 productos en el carro</span>
                                            </div>
                                            <div class="cart-body">
                                                <ul class="products mini" id="cart-items">
                                                <!-- -->
                                                </ul>
                                            </div>
                                            <div class="cart-footer">
                                                <div class="subtotal">
                                                <p>Subtotal</p>
                                                <p><strong id="cart-total">S/0.00</strong></p>
                                                </div>
                                                <div class="actions">
                                                <a href="checkout.html" class="primary-button">Pagar</a>
                                                <a href="cart.html" class="secondary-button">Ver carro</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!-- header nav -->

        
        </header>
        <!-- header -->


        <main>
            <div class="single-cart">
                <div class="container">
                    <div class="wrapper">

                        <div class="breadcrumb">
                            <ul class="flexitem">
                            <li><a href="/index.html">Inicio</a></li>
                            <li>Carrito</li>
                            </ul>
                        </div>

                        <div class="page-title">
                            <h1>Carrito de Compras</h1>
                        </div>

                        <div class="products one cart">
                            <div class="flexwrap">
                                <form action="#" class="form-cart">
                                    <div class="item">
                                    <table id="cart-table" class="cart-table">
                                        <thead>
                                        <tr>
                                            <th>Producto</th>
                                            <th>Precio</th>
                                            <th>Cantidad</th>
                                            <th>Subtotal</th>
                                            <th></th>
                                        </tr>
                                        </thead>
                                        <tbody id="cart-body">
                                        <!-- Se llenará dinámicamente con JS -->
                                        </tbody>
                                    </table>
                                    </div>
                                </form>

                                <div class="cart-summary styled">
                                    <div class="item">

                                    <!-- Resumen -->
                                    <div class="cart-total">
                                        <table>
                                        <tbody>
                                            <tr>
                                            <th>Subtotal</th>
                                            <td id="subtotal">S/0.00</td>
                                            </tr>
                                            <tr>
                                            <th>Descuento</th>
                                            <td>-S/0.00</td>
                                            </tr>
                                            <tr>
                                            <th>Envío <span class="mini-text">(Flat)</span></th>
                                            <td>S/10.00</td>
                                            </tr>
                                            <tr class="grand-total">
                                            <th>TOTAL</th>
                                            <td id="total">S/10.00</td>
                                            </tr>
                                        </tbody>
                                        </table>
                                        <a href="checkout.html" class="secondary-button">Pagar</a>
                                    </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </main>




        <footer class="footer">
            <div class="footer-container">
            <!-- Información de la tienda -->
                <div class="footer-info">
                    <p class="m-3">
                    En Babylandia nos apasiona acompañar los primeros años de vida de tu bebé, ofreciendo productos importados     de  calidad, seguros y llenos de ternura para cada etapa.
                    </p>
                </div>

                <!-- Redes Sociales -->
                <div class="footer-social">
                    <p><i class="fa-brands fa-instagram"></i> 
                        <a class="text-decoration-none text-white ancor" href="#" target="_blank">@babylandia.pe</a>
                    </p>
                    <p><i class="fa-brands fa-facebook"></i> 
                        <a class="text-decoration-none text-white ancor" href="#" target="_blank">Babylandia Perú</a>
                    </p>
                    <p><i class="fa-solid fa-envelope"></i> 
                        <a class="text-decoration-none text-white ancor" href="#">contacto@babylandia.pe</a>
                    </p>
                </div>

                <!-- Información de contacto -->
                <div class="footer-contact">
                    <p><i class="fa-solid fa-truck"></i> Envíos: Lunes a Sábado</p>
                    <p>De 10:00am a 6:00pm</p>
                    <p><i class="fa-solid fa-phone"></i> Central: (01) 765 4321</p>
                </div>
            </div>
        </footer>
        <!-- footer -->




        <div class="menu-botton desktop-hide">
            <div class="container">
                <div class="wrapper">
                    <nav>
                        <ul class="flexitem">
                            <li>
                                <a href="#">
                                    <i class="ri-bar-chart-line"></i>
                                    <span>Tendencia</span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <i class="ri-user-6-line"></i>
                                    <span>Mi cuenta</span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <i class="ri-heart-line"></i>
                                    <span>Lista de deseos</span>
                                </a>
                            </li>
                            <li>
                                <a href="#0" class="t-search">
                                    <i class="ri-search-line"></i>
                                    <span>Buscar</span>
                                </a>
                            </li>
                            <li>
                                <a href="#0" class="cart-trigger">
                                    <i class="ri-shopping-cart-line"></i>
                                    <span>Carro</span>
                                    <div class="fly-item">
                                        <span class="item-number">0</span>
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
        <!-- menu botton -->

        <div class="search-botton desktop-hide">
            <div class="container">
                <div class="wrapper">
                    <form action="" class="search">
                        <a href="" class="t-close search-close flexcenter">
                            <i class="ri-close-line"></i>
                        </a>
                        <span class="icon-large"><i class="ri-search-line"></i></span>
                        <input type="search" placeholder="Correo electronico" required>
                        <button type="submit">Buscar</button>
                    </form>
                </div>
            </div>
        </div>
        <!-- search botton -->

        <div class="overlay"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fslightbox/3.3.1/index.js"></script>
    <script src="/assets/js/script.js"></script>

    <script>
        // Obtener carrito de localStorage
        const carrito = JSON.parse(localStorage.getItem("carrito")) || [];

        // Elementos principales
        const cartBody = document.getElementById("cart-body");
        const subtotalEl = document.getElementById("subtotal");
        const totalEl = document.getElementById("total");

        // Función para actualizar la tabla del carrito
        function actualizarTabla() {
            cartBody.innerHTML = "";
            let subtotal = 0;

            carrito.forEach((producto, index) => {
                const precio = parseFloat(producto.precio);
                const cantidad = producto.cantidad || 1;
                const totalPorProducto = precio * cantidad;
                subtotal += totalPorProducto;

                cartBody.innerHTML += `
                    <tr>
                        <td class="flexitem">
                            <div class="thumbnail object-cover">
                                <img src="../img/${producto.imagen}" alt="${producto.nombre}">
                            </div>
                            <div class="content">
                                <strong>${producto.nombre}</strong>
                            </div>
                        </td>
                        <td>S/${precio.toFixed(2)}</td>
                        <td>${cantidad}</td>
                        <td>S/${totalPorProducto.toFixed(2)}</td>
                        <td><a href="#" class="item-remove" onclick="eliminarProducto(${index})"><i class="ri-close-line"></i></a></td>
                    </tr>
                `;
            });

            subtotalEl.textContent = `S/${subtotal.toFixed(2)}`;
            totalEl.textContent = `S/${(subtotal + 10).toFixed(2)}`; // Envío fijo S/10
        }

        // Función para eliminar producto desde la tabla
        function eliminarProducto(index) {
            if (confirm("¿Estás segura de eliminar este producto del carrito?")) {
                carrito.splice(index, 1);
                localStorage.setItem("carrito", JSON.stringify(carrito));
                actualizarTabla();
                actualizarMiniCarrito();
            }
        }

        // Mini carrito en header
        function actualizarMiniCarrito() {
            const contenedor = document.querySelector('.mini-cart .products.mini');
            const contador = document.querySelector('.iscart .item-number');
            const totalElem = document.querySelector('.iscart .cart-total');
            const totalTexto = document.querySelector('.mini-cart .subtotal strong');
            const contadorTexto = document.querySelector('.mini-cart .cart-head');

            if (!contenedor || !contador || !totalElem || !totalTexto || !contadorTexto) return;

            contenedor.innerHTML = "";
            let total = 0;
            let cantidadTotal = 0;

            carrito.forEach((item, index) => {
                const cantidad = item.cantidad || 1;
                const precio = parseFloat(item.precio);
                total += precio * cantidad;
                cantidadTotal += cantidad;

                const li = document.createElement("li");
                li.className = "item";
                li.innerHTML = `
                    <div class="thumbnail image-cover">
                        <a href="#"><img src="../img/${item.imagen}" alt="${item.nombre}"></a>
                    </div>
                    <div class="item-content">
                        <p><a href="#">${item.nombre}</a></p>
                        <span class="price">
                            <span>S/${precio.toFixed(2)}</span>
                            <span class="fly-item"><span>${cantidad}x</span></span>
                        </span>
                    </div>
                    <a href="#" class="item-remove" onclick="eliminarDelCarrito(${index})"><i class="ri-close-line"></i></a>
                `;
                contenedor.appendChild(li);
            });

            contador.textContent = cantidadTotal;
            totalElem.textContent = "S/" + total.toFixed(2);
            totalTexto.textContent = "S/" + total.toFixed(2);
            contadorTexto.textContent = `${carrito.length} producto${carrito.length !== 1 ? 's' : ''} en el carro`;
        }

        // Eliminar producto desde mini carrito
        function eliminarDelCarrito(index) {
            carrito.splice(index, 1);
            localStorage.setItem("carrito", JSON.stringify(carrito));
            actualizarTabla();
            actualizarMiniCarrito();
        }

        // Cargar al iniciar
        document.addEventListener("DOMContentLoaded", () => {
            actualizarTabla();
            actualizarMiniCarrito();
        });
    </script>

</body>
</html>